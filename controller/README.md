# ç’°å¢ƒç›£æŽ§æŽ§åˆ¶å™¨

## åŠŸèƒ½èªªæ˜Ž

`controller.py` æ˜¯ç’°å¢ƒç›£æŽ§ç³»çµ±çš„æ ¸å¿ƒæŽ§åˆ¶å™¨ï¼Œè² è²¬ï¼š

- è¨‚é–± MQTT Broker æŽ¥æ”¶æ„Ÿæ¸¬å™¨æ•¸æ“š
- åˆ¤æ–·æº«æ¿•åº¦è­¦å ±æ¢ä»¶
- è™•ç†ç•°å¸¸æƒ…æ³ä¸¦ç™¼é€è­¦å ±

## è­¦å ±æ¢ä»¶

- **é«˜æº«è­¦å ±**ï¼šæº«åº¦ > 30Â°C
- **ä½Žæ¿•åº¦è­¦å ±**ï¼šæ¿•åº¦ < 40%

## ä½¿ç”¨æ–¹æ³•

### 1. ç¢ºä¿ MQTT Broker é‹è¡Œä¸­

```bash
# åœ¨ mosquitto ç›®éŒ„ä¸­å•Ÿå‹•
cd mosquitto
./start_local.sh
```

### 2. å•Ÿå‹•æŽ§åˆ¶å™¨

```bash
# ä½¿ç”¨ uv é‹è¡Œ
uv run controller/controller.py
```

### 3. åŒæ™‚é‹è¡Œæ„Ÿæ¸¬å™¨ï¼ˆå¯é¸ï¼‰

åœ¨å¦ä¸€å€‹çµ‚ç«¯è¦–çª—ä¸­ï¼š

```bash
# å•Ÿå‹•æ„Ÿæ¸¬å™¨æ¨¡æ“¬å™¨
uv run sensor/sensor.py
```

## è¼¸å‡ºç¯„ä¾‹

```
ðŸš€ å•Ÿå‹•ç’°å¢ƒç›£æŽ§æŽ§åˆ¶å™¨...
ðŸ“¡ ç›®æ¨™ MQTT Broker: localhost:1883
ðŸ“‹ è¨‚é–± Topic: env/room01/reading
ðŸš¨ æº«åº¦é–¾å€¼: 30.0Â°C
ðŸš¨ æ¿•åº¦é–¾å€¼: 40.0%
--------------------------------------------------
âœ… æŽ§åˆ¶å™¨å·²é€£æŽ¥åˆ° MQTT Broker: localhost:1883
ðŸ“¡ å·²è¨‚é–± Topic: env/room01/reading
ðŸ“Š æ”¶åˆ°æ•¸æ“š #1
   æº«åº¦: 28.5Â°C, æ¿•åº¦: 45.2%
   æ™‚é–“: 2025-01-27T10:30:00Z
   ç‹€æ…‹: âœ… æ­£å¸¸
--------------------------------------------------
ðŸ“Š æ”¶åˆ°æ•¸æ“š #2
   æº«åº¦: 31.2Â°C, æ¿•åº¦: 38.5%
   æ™‚é–“: 2025-01-27T10:30:05Z
ðŸš¨ è­¦å ± #1: é«˜æº«è­¦å ±ï¼ç•¶å‰æº«åº¦ 31.2Â°C è¶…éŽé–¾å€¼ 30.0Â°C
ðŸ“¡ [WebSocket] ç™¼é€è­¦å ±: high_temperature
   å…§å®¹: é«˜æº«è­¦å ±ï¼ç•¶å‰æº«åº¦ 31.2Â°C è¶…éŽé–¾å€¼ 30.0Â°C
ðŸš¨ è­¦å ± #2: ä½Žæ¿•åº¦è­¦å ±ï¼ç•¶å‰æ¿•åº¦ 38.5% ä½Žæ–¼é–¾å€¼ 40.0%
ðŸ“¡ [WebSocket] ç™¼é€è­¦å ±: low_humidity
   å…§å®¹: ä½Žæ¿•åº¦è­¦å ±ï¼ç•¶å‰æ¿•åº¦ 38.5% ä½Žæ–¼é–¾å€¼ 40.0%
--------------------------------------------------
```

## ç’°å¢ƒè®Šæ•¸

å¯ä»¥é€éŽç’°å¢ƒè®Šæ•¸è‡ªè¨‚è¨­å®šï¼š

```bash
export MQTT_BROKER=localhost
export MQTT_PORT=1883
export MQTT_TOPIC=env/room01/reading
```

## å¾ŒçºŒæ“´å±•

ç›®å‰ç‰ˆæœ¬ä½¿ç”¨ print è¼¸å‡ºè­¦å ±ï¼Œå¾ŒçºŒå°‡å¯¦ä½œï¼š

1. **WebSocket å³æ™‚æŽ¨æ’­**ï¼šç™¼é€è­¦å ±åˆ°å‰ç«¯
2. **è³‡æ–™åº«å„²å­˜**ï¼šå°‡æ„Ÿæ¸¬æ•¸æ“šå’Œè­¦å ±è¨˜éŒ„å„²å­˜åˆ° SQLite
3. **REST API**ï¼šæä¾›æ­·å²æ•¸æ“šæŸ¥è©¢ä»‹é¢ 